{"ast":null,"code":"import _slicedToArray from\"/Users/ducdoan2002/Desktop/chat-app/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useState,useEffect}from'react';import io from'socket.io-client';import{jsx as _jsx}from\"react/jsx-runtime\";var SocketContext=/*#__PURE__*/React.createContext();export var useSocket=function useSocket(){return useContext(SocketContext);};export default function SocketProvider(_ref){var id=_ref.id,children=_ref.children;var _useState=useState(),_useState2=_slicedToArray(_useState,2),socket=_useState2[0],setSocket=_useState2[1];useEffect(function(){var newSocket=io(\"http://localhost:5000\",{query:{id:id}});setSocket(newSocket);//each time call io() -> create a new Socket instance => close everytime update socket -> reduce the amount of \n//sockets that connected to the server\nreturn function(){newSocket.close();};},[id]);console.log(socket);return/*#__PURE__*/_jsx(SocketContext.Provider,{value:socket,children:children});}","map":{"version":3,"sources":["/Users/ducdoan2002/Desktop/chat-app/client/src/components/SocketProvider.jsx"],"names":["React","useContext","useState","useEffect","io","SocketContext","createContext","useSocket","SocketProvider","id","children","socket","setSocket","newSocket","query","close","console","log"],"mappings":"gIAAA,MAAOA,CAAAA,KAAP,EAAeC,UAAf,CAA2BC,QAA3B,CAAqCC,SAArC,KAAqD,OAArD,CACA,MAAOC,CAAAA,EAAP,KAAe,kBAAf,C,2CACA,GAAMC,CAAAA,aAAa,cAAGL,KAAK,CAACM,aAAN,EAAtB,CAEA,MAAO,IAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAM,CAC3B,MAAON,CAAAA,UAAU,CAACI,aAAD,CAAjB,CACH,CAFM,CAIP,cAAe,SAASG,CAAAA,cAAT,MAAwC,IAAfC,CAAAA,EAAe,MAAfA,EAAe,CAAXC,QAAW,MAAXA,QAAW,CACnD,cAA4BR,QAAQ,EAApC,wCAAOS,MAAP,eAAeC,SAAf,eAEAT,SAAS,CAAC,UAAM,CACZ,GAAMU,CAAAA,SAAS,CAAGT,EAAE,CAAC,uBAAD,CAA0B,CAACU,KAAK,CAAE,CAACL,EAAE,CAAFA,EAAD,CAAR,CAA1B,CAApB,CACAG,SAAS,CAACC,SAAD,CAAT,CACA;AACA;AACA,MAAO,WAAM,CAACA,SAAS,CAACE,KAAV,GAAmB,CAAjC,CACH,CANQ,CAMN,CAACN,EAAD,CANM,CAAT,CAOAO,OAAO,CAACC,GAAR,CAAYN,MAAZ,EACA,mBACI,KAAC,aAAD,CAAe,QAAf,EAAwB,KAAK,CAAIA,MAAjC,UACKD,QADL,EADJ,CAKH","sourcesContent":["import React, {useContext, useState, useEffect} from 'react';\nimport io from 'socket.io-client';\nconst SocketContext = React.createContext();\n\nexport const useSocket = () => {\n    return useContext(SocketContext);\n}\n\nexport default function SocketProvider({id, children}) {\n    const [socket, setSocket] = useState();\n\n    useEffect(() => {\n        const newSocket = io(\"http://localhost:5000\", {query: {id}});\n        setSocket(newSocket);\n        //each time call io() -> create a new Socket instance => close everytime update socket -> reduce the amount of \n        //sockets that connected to the server\n        return () => {newSocket.close();}\n    }, [id])\n    console.log(socket);\n    return (\n        <SocketContext.Provider value = {socket}>\n            {children}\n        </SocketContext.Provider>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}